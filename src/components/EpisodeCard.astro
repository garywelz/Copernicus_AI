---
import type { SpotifyEpisode } from '../utils/spotify';
import { formatDuration, formatDate } from '../utils/spotify';

interface Props {
  episode: SpotifyEpisode;
}

const { episode } = Astro.props;
---

<article class="bg-white rounded-lg shadow-sm overflow-hidden">
  <div class="p-6">
    <div class="flex items-start space-x-4">
      <div class="flex-shrink-0">
        <img
          src={episode.images[0]?.url || '/placeholder.png'}
          alt={episode.name}
          class="w-24 h-24 rounded-lg object-cover"
          width={96}
          height={96}
        />
      </div>
      <div class="flex-1 min-w-0">
        <h2 class="text-xl font-semibold text-gray-900 mb-2">
          <a href={`/episodes/${episode.id}`} class="hover:text-blue-600">
            {episode.name}
          </a>
        </h2>
        <div class="flex items-center space-x-4 text-sm text-gray-500 mb-2">
          <span>{formatDate(episode.release_date)}</span>
          <span>â€¢</span>
          <span>{formatDuration(episode.duration_ms)}</span>
        </div>
        <p class="text-gray-600 line-clamp-2">{episode.description}</p>
        <div class="mt-4">
          <iframe
            src={`https://open.spotify.com/embed/episode/${episode.id.split(':')[2]}`}
            width="100%"
            height="152"
            frameborder="0"
            allowtransparency="true"
            allow="encrypted-media"
            class="rounded-lg"
          ></iframe>
        </div>
      </div>
    </div>
  </div>
</article> 